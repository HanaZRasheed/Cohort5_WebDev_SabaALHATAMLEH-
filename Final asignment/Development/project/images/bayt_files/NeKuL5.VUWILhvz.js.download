(this.$WP=this.$WP||[]).push(["NeKuL5",(e,a)=>{"use strict";var i,n,t,l,d,r,o,s,u,c,m,v,k,f,_,g,N,y,b=({message:e,tooltip:a,cta:i})=>n("div",{className:"VcRIPA4H"},e&&n("span",{className:"A9fCG438"},e),a&&n(k,{below:!0,message:a},e=>n("span",{ref:e}," ",n(f,{color:"black",name:"information-circle"}))),i&&n(t,null,n("span",{className:"_2O1aEq1_"}),n("span",{className:"_2Tx9ZFFm"},i))),S=e=>{switch(e){case"OWNER":return 0;case"SCRAPER":return 2;default:return 1}},p=({locationId:e,giftCardUrl:a,trackingData:i})=>{var t=a?"update":"add",d=c(Object.assign({},i,{action:`covid19_${t}_giftcard_alert_impression`}));l(()=>{d()},[d]);var r=c(Object.assign({},i,{action:`covid19_${t}_giftcard_alert_click`}));return n(b,{message:n(v,{id:"covid19_rr_restaurant_owner_gift_card",args:{boldStart:"<b>",boldEnd:"</b>"}}),cta:n("a",{href:`/ManageListing-d${e}#/general`,onClick:r},n(m,a?{id:"covid19_rr_restaurant_owner_update_giftcard"}:{id:"covid19_rr_restaurant_owner_add_giftcard"}))})},I=({giftCardUrl:e,trackingData:a})=>{var i=c(Object.assign({},a,{action:"covid-19-gift-card-alert-shown"}));l(()=>{i()},[i]);var t=c(Object.assign({},a,{action:"covid-19-gift-card-alert-click"})),d=n(m,{id:"covid19_restaurant_gift_card_info"});return n(b,e?{message:n(v,{id:"covid19_restaurant_gift_card2",args:{boldStart:"<b>",boldEnd:"</b>"}}),tooltip:d,cta:n("a",{href:e,target:"_blank",onClick:t},n(m,{id:"covid19_purchase_online_gift_card"}))}:{message:n(v,{id:"covid19_purchase_offline_gift_card2",args:{boldStart:"<b>",boldEnd:"</b>"}}),tooltip:d})},D=({locationId:e})=>{var a,i,t,l,d,o,s={module:"Restaurant_Review",context:String(e),action:""},[u]=r({query:_,variables:{locationId:e}}),c=null==(a=u.data)||null==(i=a.ownerPropertiesForUserLocation)?void 0:i.ownerStatus,m=null!=c&&"NOT_AN_OWNER"!==c,[v]=r({query:g,variables:{locationId:e}}),k=null==(t=v.data)||null==(l=t.Menus_getGiftcards)?void 0:l[0],f=null==k||null==(d=k.ownerIndicator)?void 0:d.hasOwnerVerifiedGiftcard,N=null==(o=((null==k?void 0:k.urls)||[]).reduce((e,a)=>!e||S(e.updatedBy)>S(null==a?void 0:a.updatedBy)?a:e,null))?void 0:o.url;if(!v.fetching){if(m)return n(p,{locationId:e,giftCardUrl:N,trackingData:s});if(null==f&&N||f)return n(I,{giftCardUrl:N,trackingData:s})}return null},O=({takoutStatus:e})=>{if(!e||!e.deliveryTakeoutOnly)return null;var a,{endDate:n}=e;if(n){if(((e=>{if(!e)return null;var a=e.split("-");if(3===a.length){var i=parseInt(a[0],10),n=parseInt(a[1],10),t=parseInt(a[2],10);if(i&&n&&t)return new Date(i,n-1,t)}return null})(n)||new Date)<new Date)return null;a=i.createElement(v,{id:"eat_r_covid19_banner_takeout_only_date_v1",args:{date:n}})}else a=i.createElement(v,{id:"eat_r_covid19_banner_takeout_only_v1"});return i.createElement(b,{message:a})},T=({locationId:e})=>{var[{error:a,data:n}]=r({query:N,variables:{lid:{locationId:e}}});if(a)return null;var t=null==n?void 0:n.RestaurantCommerceSelection_getDeliveryTakeoutOnlyStatus;return t?i.createElement(O,{takoutStatus:t}):null},F=()=>{var e,a,i,l,c,[m]=d(o),v=m.params.detailId||0,[{data:k,fetching:f,error:_}]=r({query:y,variables:{locationId:v,includeUnavailableTags:!1},pause:!s("restaurants_review_covid19_travel_safe_module")}),g=null==k||null==(e=k.safetyInfo)||null==(a=e[0])||null==(i=a.managementResponse)?void 0:i.body,N=null==k||null==(l=k.safetyInfo)||null==(c=l[0])?void 0:c.safetyTags,b=N&&N.length>0,S=g?(e=>{try{return JSON.parse(e)}catch(e){return console.error("Invalid json was received",e),{}}})(g):null,p=S&&"covid-19"===S.type&&S.body;return!s("restaurants_review_covid19_travel_safe_module")||f||_||!b&&!p?n(t,null,n(T,{locationId:v}),n(D,{locationId:v})):n(u,{hasSafetyTags:!!b,locationType:"RESTAURANT"})};return[()=>{(_=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"OwnerStatus"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ownerPropertiesForUserLocation"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ownerStatus"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":129}}')).__key=69209008221433,_.loc.source={body:"3ef1fa59acf9"},(g=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"GiftCard"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Menus_getGiftcards"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ownerIndicator"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"hasOwnerVerifiedGiftcard"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"urls"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"updatedBy"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":198}}')).__key=86472492928141,g.loc.source={body:"4ea572394c8d"},(N=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"CovidTakeoutQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"lid"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"RestaurantCommerceSelection_RestaurantDeliveryTakeoutOnlyStatusRequestInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"RestaurantCommerceSelection_getDeliveryTakeoutOnlyStatus"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"lid"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"deliveryTakeoutOnly"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"endDate"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":255}}')).__key=88675978293840,N.loc.source={body:"50a67c2fb250"},(y=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"SafetyMeasuresQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"includeUnavailableTags"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"safetyInfo"},"name":{"kind":"Name","value":"HealthSafety_getSafetyInfo"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"locationId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"includeUnavailableTags"},"value":{"kind":"Variable","name":{"kind":"Name","value":"includeUnavailableTags"}}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"managementResponse"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"body"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"safetyTags"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"tagId"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":319}}')).__key=0x876c31e972c7,y.loc.source={body:"876c31e972c7"},e("default",F)},[e=>(i=e.default,n=e.createElement,t=e.Fragment,l=e.useEffect,d=e.useContext),e=>r=e.useQuery,e=>o=e.Route,e=>s=e.featureIsEnabled,e=>u=e.default,e=>c=e.useGARecordCallback,e=>(m=e.default,v=e.UnsafeLocalize),e=>k=e.default,e=>f=e.default]]},["cDcdfi","5X2em-","2R4xv2","-i3PJS","9kM7rC","fsml46","0DsHEV","x9N_Dh","OMqGt0"]]);
